# 모듈 3 : 글로벌 인프라 및 신뢰성

- AWS 글로벌 인프라 이점 요약
- 가용 영역 기본 개념 설명
- AWS CloudFront 및 엣지 로케이션 이점 설명
- AWS 서비스를 프로비저닝할 수 있는 다양한 방법 비교

## 모듈 3 소개

### 고가용성

> ✅ HA(High Availability): 고가용성  
>
> 스타벅스는 정자역 1번 출구, 3번 출구, 11번 출구에 배치가 되어 있다.  
> 고객은 1번 출구 스벅에 사람이 많으면 3번 출구 스벅에 가서 커피를 사면 된다.

`모든 리소스`를 `1개의 데이터 센터`에 `구축`하는 것은 `올바른 방법이 아니다`.  
만약 `1개의 데이터 센터`가 `자연 재해` + `다른 이슈`로 인하여 망가지면 서비스 복구가 불가능해진다.  
하여 이러한 문제를 방지 하기 위해서 우리는 `고가용성`과 `내결함성` 유지할 수 있는 구조를 설계해야 한다.

> 🤔 그렇다면 데이터 센터 2대 운영하면 될까?!

위에서 말했지만 `데이터 센터 2대`도 어떻게 보면 `100% 안정적이지는 않다`.  
AWS는 대신 `리전`(region)라고 하는 `지리적 위치`를 사용하고 있다.

## AWS 글로벌 인프라(리전)

> AWS 글로벌 인프라(리전)을 이해 하려면 '비즈니스 요구사항'을 알아야 함

현재까지 `다수의 기업`은 `자체 IDC 센터`에 `리소스`를 `운영`하였다.  
하지만 `AWS 등장` 후 `기업`은 `애플리케이션`을 `AWS 데이터 센터에서 실행`하게 되었다.

> 여기서 우리는 데이터 센터와 관련된 '근본적인 문제'를 이해해야 한다.  
> 왜 기업은 IDC 자체 데이터 센터가 아닌, AWS 데이터 센터를 이용하는가?

어떤 사건으로 인해 `건물의 네트워크가 끊기기도 하고`, 이러한 원인은 구축자가 직접 알아내야 한다.  
`재해 대비`를 위해 `2번째 데이터 센터 운영도 가능`하지만 `부동산 가격`도 장난이 아니다.  
그것뿐인가? `H/W` + `직원` + `전기` + `냉난방` + `보안` 관련 `비용`을 `2번 지불`해야 한다.

> 리전(region): 서울, 오하이오주, 도쿄, 중국  
>
> - 애플리케이션 실행을 위한 모든 서비스가 구비된 데이터 센터 존재
> - 고속 광섬유 네트워크 --> 다른 네트워크 연결
> - 각 리전은 다른 리전과 격이됨

`AWS 데이터 센터`는 `대규모 그룹의 자체 데이터 센터`를 통해 `재난 대비`가 `가능`하다.  
이러한 부분을 `리전`(region)이라 지칭한다.

리전 선택의 고려사항으로는 아래 4가지 요구사항이 존재한다.  
`규정 준수`, `근접성`, `기능 가용성`, `요금`.

- `규정 준수`: 데이터가 특정 리전을 벗어나면 안되는 경우?
- `근접성`: 지연 시간 최소화를 위한 서비시 고객 위치 파악
- `기능 가용성`: 특정 리전에서 제공 안하는 서비스도 있음
- `요금`: 일부 지역은 요금 비쌈

## 가용 영역(Availability zone)

> 리전 내의 단일 혹은 다중 데이터 센터

가용 영역은 리전의 하위 단위 개념으로 물리적으로 수십KM씩 떨어져있는 `데이터 센터의 실제 위치`를 의미한다.  
`가용영역`이 `1개`인 경우 가용성(HA)를 유지할 수 없기에, 최소 2개 이상의 가용영역을 사용할것을 AWS는 권장한다.

## 엣지 로케이션

> 전 세계에 위치한 Edge Location 캐싱 서버

만약 고객의 위치는 뭄바이에 있고 고객이 원하는 데이터는 서울에 있다면 어떻게 해야할까?  
고객은 애플리케이션 접속 후 서울의 데이터를 받기 위해 어느 정도의 지연 대기 시간을 기다려야 한다.  

이는 고객 입장에서 좋지 않은 서비스 경험을 하게 되기에,  
AWS는 Edge Location(CloudFront, Route53, Global accelerator) 서비스 제공을 통해 지연 시간을 최소화 한다.

CloudFront는 AWS의 CDN 서비스로, 정적 컨텐츠인(css, image, javascript..) 데이터를  
고객이 위치한 지점의 엣지 로케이션에 캐싱 해두고 요청에 맞게 응답해주는 서비스이다.

또한 AWS 리소스 자원을 온프레미스에서 사용을 해야 하는 경우는 OutPosts 서비스를 사용할 수 있는데,
OutPost 서비스는 렉을 온프레미스에 구축하여 네트워크 지연없이 로컬에서 AWS서비스를 사용할 수 있게 만드는 서비스이다.

## AWS 리소스를 프로비저닝 하는 방법

> AWS 모든 리소스는 API 통신을 통해 이루어진다고 봐도 과언이 아니다.

AWS의 리소스는 API를 통해 생성, 수정, 삭제가 이루어진다.  
AWS 리소스를 프로비저닝 하는 방법은 아래 `4가지`가 존재한다.

- AWS Management Console: 사용자 친화형 UI 콘솔로, 초기 학습에 도움이 됨
- AWS CLI(Command Line Interface): 터미널 명령어 기반 리소스 제어, 스크립트를 통해 휴먼 에러 방지
- AWS SDK(Software Development Kit): AWS에서 제공하는 SDK를 활용하여 리소스 제어
- AWS IaC(Infrastructure as Code): 완전 관리형 소스 기반 리소스 제어

> IaC 관련 리소스는 CloudFormation이 존재하고, PaaS 서비스인 ElasticBeanStalk도 존재한다.

- ElasticBeanStalk
  - EC2 기반 환경 프로비저닝 지원 서비스
  - 코드 및 원하는 구성 제공 -> 자동으로 리소스 프로비저닝
- CloudFormation
  - 코드형 인프라 도구
  - 템플릿(JSON, YAML) 사용
  - 템플릿 기반 리소스 정의 가능

## 모듈 3 요약

- 리전(region)
  - 리전은 전 세계 곳곳에 존재
  - ELB, SQS, SNS는 리전 레벨 -> HA 보장
- 가용영역
  - 1개 이상의 데이터 센터
  - 2개 이상의 인프라 배포 필요
- 엣지 로케이션
  - 캐싱 서비스
  - 지연 시간 방지
  - OutPosts
- 프로비저닝
  - AWS Management Console
  - AWS CLI
  - AWS SDK
  - AWS CloudFormation, AWS Elastic Bean Stalk

## 99. 참고 자료

- [[AWS] AWS Cloud Practitional Essentials](https://explore.skillbuilder.aws/learn/course/13522/play/107682/aws-cloud-practitioner-essentials-korean-na-hangug-eo-gang-ui)